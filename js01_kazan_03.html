<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>火成岩の種類：js01_kazan_03</title>
    <style>
        :root { --primary-color: #2c3e50; --bg-color: #f8f9fa; --drop-zone-bg: #fff9c4; --nav-color: #34495e; }
        body { font-family: sans-serif; background-color: var(--bg-color); margin: 0; padding: 0; }
        
        /* 固定ヘッダー */
        .sticky-header { 
            position: sticky; top: 0; background: var(--bg-color); 
            padding: 10px 0; z-index: 1000; border-bottom: 2px solid #ddd; 
        }

        .container { 
            max-width: 1050px; margin: 20px auto; background: white; 
            padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); 
        }
        
        /* ナビゲーションメニュー（01-05） */
        .nav-tabs { 
            display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 20px; 
            border-bottom: 2px solid #ddd; padding-bottom: 10px; 
        }
        .nav-tab-btn { 
            padding: 8px 12px; background: #f0f0f0; border: 1px solid #ccc; 
            border-radius: 5px; text-decoration: none; color: #333; 
            font-size: 0.85rem; font-weight: bold; 
        }
        .nav-tab-btn.active { 
            background: var(--nav-color); color: white; border-color: var(--nav-color); 
        }

        .challenge-panel { 
            background: #333; color: #fff; padding: 10px; border-radius: 8px; 
            display: flex; justify-content: space-around; align-items: center; 
            max-width: 1050px; margin: 0 auto 10px; 
        }
        .timer { font-size: 1.5em; color: #f1c40f; font-family: monospace; }
        
        .word-bank-container { 
            background: #eee; padding: 15px; border-radius: 8px; border: 1px solid #ccc; 
            max-width: 1050px; margin: 0 auto; 
        }
        .word-bank { display: flex; flex-wrap: wrap; gap: 8px; min-height: 40px; }
        .drag-item { 
            background: #3498db; color: white; padding: 6px 14px; border-radius: 20px; 
            cursor: pointer; font-weight: bold; font-size: 0.85em; 
        }
        .drag-item.selected { background: #f1c40f; color: #333; }

        /* 導入セクション */
        .intro-section { 
            display: flex; align-items: center; gap: 20px; background: #fff4e5; 
            padding: 20px; border-radius: 8px; border-left: 6px solid #e67e22; margin: 20px 0; 
        }
        .intro-text { flex: 1; font-size: 1.1rem; line-height: 2.2; font-weight: bold; }
        .intro-img { width: 320px; height: auto; border: 1px solid #ccc; border-radius: 4px; }
        
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #bdc3c7; padding: 12px 8px; text-align: center; }
        .drop-zone { 
            display: inline-block; min-width: 80px; min-height: 1.4em; 
            background: var(--drop-zone-bg); border: 2px dashed #f1c40f; 
            border-radius: 4px; vertical-align: middle; cursor: pointer; 
        }
        .drop-zone.correct { background: #d4edda !important; border: 2px solid #28a745 !important; }
        .drop-zone.wrong { background: #f8d7da !important; border: 2px solid #dc3545 !important; }

        /* 下部操作ナビゲーション（image_f239b6.pngを再現） */
        .controls { text-align: center; margin-top: 30px; padding-bottom: 50px; display: flex; justify-content: center; gap: 15px; }
        .main-btn { 
            padding: 12px 25px; font-size: 1rem; cursor: pointer; border: none; 
            border-radius: 6px; font-weight: bold; color: white; transition: 0.2s;
        }
        .challenge-btn { background: #e67e22; } /* オレンジ */
        .check-btn { background: #27ae60; }     /* 緑 */
        .reset-btn { background: #95a5a6; }     /* グレー */
        .main-btn:hover { opacity: 0.9; transform: translateY(-1px); }
    </style>
</head>
<body>

<div class="sticky-header">
    <div class="challenge-panel">
        <div>TIME: <span id="timerDisplay" class="timer">00:00.0</span></div>
        <div id="recordDisplay" style="font-size:0.8em;">記録なし</div>
    </div>
    <div class="word-bank-container"><div id="wordBank" class="word-bank">「チャレンジ開始」で語群が表示されます。</div></div>
</div>

<div class="container">
    <div class="nav-tabs">
        <a href="JS01_kazan_01.html" class="nav-tab-btn">01.火山の構造</a>
        <a href="JS01_kazan_02.html" class="nav-tab-btn">02.形と性質</a>
        <a href="js01_kazan_03.html" class="nav-tab-btn active">03.火成岩の種類</a>
        <a href="js01_kazan_04.html" class="nav-tab-btn">04.造岩鉱物</a>
        <a href="js01_kazan_05.html" class="nav-tab-btn">05.火成岩の成分</a>
    </div>

    <div class="intro-section">
        <div class="intro-text">
            マグマが冷えて固まった岩石を①<div class="drop-zone" data-ans="火成岩" onclick="zoneClicked(this)"></div>といいます。<br>
            火山岩と深成岩をあわせて①<div class="drop-zone" data-ans="火成岩" onclick="zoneClicked(this)"></div>といいます。
        </div>
        <img src="image_75ca08.png" class="intro-img" alt="火成岩の分類図">
    </div>

    <table>
        <tr><th>分類</th><th>組織図</th><th>組織名</th><th>形成過程</th></tr>
        <tr>
            <td>② <div class="drop-zone" data-ans="火山" onclick="zoneClicked(this)"></div> 岩</td>
            <td><img src="image_75ca46.png" style="max-height:80px;"><br>④<div class="drop-zone" data-ans="石基" onclick="zoneClicked(this)"></div>と⑤<div class="drop-zone" data-ans="はん晶" onclick="zoneClicked(this)"></div></td>
            <td>⑥ <div class="drop-zone" data-ans="はん状" onclick="zoneClicked(this)"></div> 組織</td>
            <td style="text-align:left;">地表付近でマグマが⑦<div class="drop-zone" data-ans="急冷され" onclick="zoneClicked(this)"></div>、地下で成長した大きな結晶のまわりを細かい粒が埋めたもの。</td>
        </tr>
        <tr>
            <td>③ <div class="drop-zone" data-ans="深成" onclick="zoneClicked(this)"></div> 岩</td>
            <td><img src="image_75ca83.png" style="max-height:80px;"></td>
            <td>⑩ <div class="drop-zone" data-ans="等粒状" onclick="zoneClicked(this)"></div> 組織</td>
            <td style="text-align:left;">地下深くで、マグマが長い時間をかけて⑪<div class="drop-zone" data-ans="ゆっくり" onclick="zoneClicked(this)"></div>冷え固まり、すべての結晶が大きく成長したもの。</td>
        </tr>
    </table>

    <div class="controls">
        <button class="main-btn challenge-btn" onclick="startChallenge()">チャレンジ開始！ (答えを隠す)</button>
        <button class="main-btn check-btn" onclick="checkAnswers()">答え合わせ</button>
        <button class="main-btn reset-btn" onclick="showModel()">お手本に戻す</button>
    </div>
</div>

<script>
    const words = ["火成岩","火山","深成","石基","はん晶","はん状","急冷され","ゆっくり"];
    let startTime, timerInterval, isRunning = false, selectedWord = null;

    function zoneClicked(z){ 
        if(isRunning && selectedWord){ 
            z.innerText = selectedWord.innerText; 
            selectedWord.classList.remove('selected'); 
            selectedWord = null; 
        } 
    }

    function startChallenge(){
        isRunning = true; startTime = Date.now();
        timerInterval = setInterval(()=> {
            document.getElementById('timerDisplay').innerText = ((Date.now()-startTime)/1000).toFixed(1)+"s";
        }, 100);
        document.querySelectorAll('.drop-zone').forEach(z=>{ z.innerText=""; z.className="drop-zone"; });
        const bank = document.getElementById('wordBank'); bank.innerHTML = "";
        [...new Set(words)].sort(()=>Math.random()-0.5).forEach(w=>{
            const d = document.createElement('div'); d.className='drag-item'; d.innerText=w;
            d.onclick=function(){ 
                if(selectedWord)selectedWord.classList.remove('selected'); 
                selectedWord=this; this.classList.add('selected'); 
            };
            bank.appendChild(d);
        });
    }

    function checkAnswers(){
        let ok=true; 
        document.querySelectorAll('.drop-zone').forEach(z=>{
            if(z.innerText===z.getAttribute('data-ans')) z.className="drop-zone correct";
            else { z.className="drop-zone wrong"; ok=false; }
        });
        if(ok && isRunning){ clearInterval(timerInterval); isRunning=false; alert("合格！タイム: " + document.getElementById('timerDisplay').innerText); }
    }

    function showModel(){ 
        clearInterval(timerInterval); isRunning=false; 
        document.getElementById('wordBank').innerHTML = "お手本表示中。";
        document.querySelectorAll('.drop-zone').forEach(z=>{ z.innerText=z.getAttribute('data-ans'); z.className="drop-zone"; }); 
    }
    
    showModel();
</script>
</body>

</html>
